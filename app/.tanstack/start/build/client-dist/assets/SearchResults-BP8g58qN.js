import{r as d,s as f,a as u,j as e}from"./main-Da8gHJDy.js";import{u as b}from"./useMutation-08HiTXAR.js";function y({onResults:s,onSearchStart:a}){const[r,l]=d.useState(""),t=b({fn:f,onSuccess:({data:i})=>{console.log("Search completed successfully:",i),s(i)}});d.useEffect(()=>{t.status==="pending"&&a&&a()},[t.status,a]);const o=i=>{i.preventDefault(),r.trim()&&(console.log("Starting search for:",r),t.mutate({data:r}))};return u.useEffect(()=>{t.error&&console.error("Search failed:",t.error)},[t.error]),e.jsxs("div",{className:"mb-8",children:[e.jsxs("form",{onSubmit:o,className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-emerald-400 font-mono text-sm",children:"$"}),e.jsx("input",{type:"text",value:r,onChange:i=>l(i.target.value),placeholder:"Ask about AI agents, e.g., 'Best frameworks for building AI agents?'",className:"w-full hacker-input pl-8 pr-4 py-3 placeholder-slate-500",disabled:t.status==="pending"})]}),e.jsx("button",{type:"submit",disabled:t.status==="pending"||!r.trim(),className:"hacker-button py-3 px-6 disabled:opacity-50 disabled:cursor-not-allowed",children:t.status==="pending"?"Searching...":"Search"})]}),t.error&&e.jsxs("div",{className:"mt-3 p-3 bg-red-900/20 border border-red-500 text-red-400 font-mono text-sm rounded-md",children:[e.jsx("span",{className:"text-red-400 font-semibold",children:"Error:"})," ",t.error.message]})]})}function j(s){const a=/https?:\/\/[^\s\n]+/g;return s.match(a)||[]}function x(s){const a=/(https?:\/\/[^\s\n]+)/g,r=s.split(a);return e.jsx("div",{className:"space-y-2",children:r.map((l,t)=>l.match(a)?e.jsxs("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-emerald-400 transition-colors break-all block",children:["→ ",l]},t):e.jsx("span",{className:"whitespace-pre-wrap",children:l},t))})}function g({result:s}){const[a,r]=d.useState(!1),[l,t]=d.useState(!1),o=j(s.content),i=o.length>0,h=s.content.length>500,m=n=>typeof window<"u"?`${window.location.origin}/resource/${n}`:`/resource/${n}`,p=async n=>{try{await navigator.clipboard.writeText(n)}catch(c){console.error("Failed to copy to clipboard:",c)}};return e.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-lg mb-6 overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-800 border-b border-slate-700 p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-slate-500 font-mono text-xs mb-1",children:["ID: ",s.metadata.resource_id]}),e.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-emerald-400 mb-2 leading-tight",children:s.metadata.title})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs font-mono ml-4",children:[e.jsxs("span",{className:"flex items-center gap-1 text-blue-400",children:[e.jsx("span",{children:"↑"}),e.jsx("span",{children:s.metadata.reaction_count})]}),e.jsxs("span",{className:"flex items-center gap-1 text-slate-400",children:[e.jsx("span",{children:"★"}),e.jsx("span",{children:s.metadata.evergreen_rating})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:s.metadata.tags.map((n,c)=>e.jsx("span",{className:"inline-block bg-slate-700 text-emerald-400 text-xs px-2 py-1 font-mono rounded-md",children:n},c))}),e.jsx("div",{className:"text-xs font-mono text-slate-400",children:new Date(s.metadata.date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs font-mono",children:[e.jsx("button",{onClick:()=>r(!a),className:"text-blue-400 hover:text-emerald-400 transition-colors",children:a?"Collapse":"Expand"}),e.jsx("button",{onClick:()=>p(m(s.metadata.resource_id)),className:"text-blue-400 hover:text-emerald-400 transition-colors",children:"Copy Link"}),e.jsx("a",{href:m(s.metadata.resource_id),target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-emerald-400 transition-colors",children:"Open Resource"})]})]}),e.jsxs("div",{className:"p-4",children:[a?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-slate-100 font-sans text-sm leading-relaxed",children:x(s.content)}),i&&e.jsxs("div",{className:"border-t border-slate-700 pt-4",children:[e.jsxs("h4",{className:"text-emerald-400 font-semibold text-sm mb-3",children:["Documentation Links (",o.length,")"]}),e.jsx("div",{className:"grid gap-2",children:o.map((n,c)=>e.jsxs("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-2 bg-slate-700 border border-slate-600 hover:border-emerald-500 transition-colors rounded-md",children:[e.jsx("span",{className:"text-blue-400 font-mono",children:"→"}),e.jsx("span",{className:"text-blue-400 hover:text-emerald-400 text-xs break-all transition-colors",children:n})]},c))})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-slate-100 font-sans text-sm leading-relaxed",children:h?e.jsxs("div",{children:[e.jsxs("p",{className:"mb-2",children:[s.content.substring(0,300),"..."]}),e.jsx("button",{onClick:()=>t(!l),className:"text-blue-400 hover:text-emerald-400 text-xs transition-colors",children:l?"Hide Preview":"Show Preview"}),l&&e.jsx("div",{className:"mt-3 text-slate-100 font-sans text-sm leading-relaxed",children:x(s.content)})]}):x(s.content)}),i&&e.jsxs("div",{className:"border-t border-slate-700 pt-3",children:[e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"text-emerald-400 font-semibold text-xs",children:"Links:"})}),e.jsxs("div",{className:"grid gap-1",children:[o.slice(0,3).map((n,c)=>e.jsxs("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-xs text-blue-400 hover:text-emerald-400 transition-colors",children:[e.jsx("span",{className:"text-blue-400",children:"→"}),e.jsx("span",{className:"truncate",children:n})]},c)),o.length>3&&e.jsxs("div",{className:"text-xs text-slate-400 font-mono",children:["... and ",o.length-3," more link",o.length-3===1?"":"s"]})]})]})]}),s.similarity&&e.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-700 text-xs font-mono text-slate-500",children:["Similarity: ",(s.similarity*100).toFixed(1),"%"]})]})]})}function k({results:s,isLoading:a}){return a?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-emerald-400 font-mono text-sm animate-pulse-subtle",children:"Searching..."}),e.jsx("div",{className:"text-slate-400 font-sans text-sm mt-2",children:"Finding the most relevant resources for you"})]}):s.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-red-500 font-mono text-sm mb-2",children:"No results found"}),e.jsx("div",{className:"text-slate-400 font-sans text-sm",children:"Try adjusting your search query or explore our trending resources"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-emerald-400 font-mono text-sm mb-4 border-b border-slate-700 pb-2",children:["Found ",s.length," results"]}),s.map(r=>e.jsx(g,{result:r},r.id))]})}export{y as S,k as a};
