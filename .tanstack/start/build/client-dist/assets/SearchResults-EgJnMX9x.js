import{r as d,a as f,j as e,b as k}from"./main-rW6vsDpn.js";import{u as g}from"./useMutation-aIMscbbI.js";function v({onResults:t,onSearchStart:r}){const[a,c]=d.useState(""),s=g({fn:k,onSuccess:({data:l})=>{console.log("Search completed successfully:",l),t(l)}});d.useEffect(()=>{s.status==="pending"&&r&&r()},[s.status,r]);const o=l=>{l.preventDefault(),a.trim()&&(console.log("Starting search for:",a),s.mutate({data:a}))};return f.useEffect(()=>{s.error&&console.error("Search failed:",s.error)},[s.error]),e.jsxs("div",{className:"mb-8",children:[e.jsxs("form",{onSubmit:o,className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-hacker-green font-mono text-sm",children:"$"}),e.jsx("input",{type:"text",value:a,onChange:l=>c(l.target.value),placeholder:"Ask about AI agents, e.g., 'Best frameworks for building AI agents?'",className:"w-full hacker-input pl-8 pr-4 py-3 rounded-none border-2 placeholder-hacker-text-darker focus:animate-pulse-green",disabled:s.status==="pending"})]}),e.jsx("button",{type:"submit",disabled:s.status==="pending"||!a.trim(),className:"hacker-button py-3 px-6 rounded-none border-2 disabled:opacity-50 disabled:cursor-not-allowed hover:animate-pulse-green",children:s.status==="pending"?"[SEARCHING...]":"[EXECUTE]"})]}),s.error&&e.jsxs("div",{className:"mt-3 p-3 bg-hacker-bg-secondary border border-hacker-red text-hacker-red font-mono text-sm",children:[e.jsx("span",{className:"text-hacker-red",children:"ERROR:"})," ",s.error.message]})]})}function b(t){const r=/https?:\/\/[^\s\n]+/g;return t.match(r)||[]}function x(t){const r=/(https?:\/\/[^\s\n]+)/g,a=t.split(r);return e.jsx("div",{className:"space-y-2",children:a.map((c,s)=>c.match(r)?e.jsxs("a",{href:c,target:"_blank",rel:"noopener noreferrer",className:"hacker-link hover:text-hacker-green break-all block",children:["→ ",c]},s):e.jsx("span",{className:"whitespace-pre-wrap",children:c},s))})}function u({result:t}){const[r,a]=d.useState(!1),[c,s]=d.useState(!1),o=b(t.content),l=o.length>0,m=t.content.length>500,h=n=>typeof window<"u"?`${window.location.origin}/resource/${n}`:`/resource/${n}`,p=async n=>{try{await navigator.clipboard.writeText(n)}catch(i){console.error("Failed to copy to clipboard:",i)}};return e.jsxs("div",{className:"hacker-card rounded-none mb-6 overflow-hidden",children:[e.jsxs("div",{className:"bg-hacker-bg-tertiary border-b border-hacker-border p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-hacker-green font-mono text-xs mb-1",children:["[RESOURCE_ID: ",t.metadata.resource_id,"]"]}),e.jsx("h3",{className:"text-xl md:text-2xl hacker-title text-hacker-green mb-2 leading-tight",children:t.metadata.title})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs font-mono ml-4",children:[e.jsxs("span",{className:"flex items-center gap-1 text-hacker-cyan",children:[e.jsx("span",{children:"↑"}),e.jsx("span",{children:t.metadata.reaction_count})]}),e.jsxs("span",{className:"flex items-center gap-1 text-hacker-text",children:[e.jsx("span",{children:"★"}),e.jsx("span",{children:t.metadata.evergreen_rating})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:t.metadata.tags.map((n,i)=>e.jsx("span",{className:"inline-block bg-hacker-bg border border-hacker-green text-hacker-green text-xs px-2 py-1 font-mono uppercase",children:n},i))}),e.jsx("div",{className:"text-xs font-mono text-hacker-text-dim",children:new Date(t.metadata.date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs font-mono",children:[e.jsxs("button",{onClick:()=>a(!r),className:"hacker-link hover:text-hacker-green",children:["[",r?"COLLAPSE":"EXPAND","]"]}),e.jsx("button",{onClick:()=>p(h(t.metadata.resource_id)),className:"hacker-link hover:text-hacker-green",children:"[COPY_LINK]"}),e.jsx("a",{href:h(t.metadata.resource_id),target:"_blank",rel:"noopener noreferrer",className:"hacker-link hover:text-hacker-green",children:"[OPEN_RESOURCE]"})]})]}),e.jsxs("div",{className:"p-4",children:[r?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-hacker-text font-mono text-sm leading-relaxed",children:x(t.content)}),l&&e.jsxs("div",{className:"border-t border-hacker-border pt-4",children:[e.jsxs("h4",{className:"hacker-title text-sm mb-3",children:["Documentation Links (",o.length,")"]}),e.jsx("div",{className:"grid gap-2",children:o.map((n,i)=>e.jsxs("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-2 bg-hacker-bg-secondary border border-hacker-border hover:border-hacker-green transition-colors",children:[e.jsx("span",{className:"text-hacker-cyan font-mono",children:"→"}),e.jsx("span",{className:"hacker-link text-xs break-all",children:n})]},i))})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-hacker-text font-mono text-sm leading-relaxed",children:m?e.jsxs("div",{children:[e.jsxs("p",{className:"mb-2",children:[t.content.substring(0,300),"..."]}),e.jsxs("button",{onClick:()=>s(!c),className:"hacker-link text-xs hover:text-hacker-green",children:["[",c?"HIDE_PREVIEW":"SHOW_PREVIEW","]"]}),c&&e.jsx("div",{className:"mt-3 text-hacker-text font-mono text-sm leading-relaxed",children:x(t.content)})]}):x(t.content)}),l&&e.jsxs("div",{className:"border-t border-hacker-border pt-3",children:[e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"hacker-title text-xs",children:"Links:"})}),e.jsxs("div",{className:"grid gap-1",children:[o.slice(0,3).map((n,i)=>e.jsxs("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-xs hacker-link hover:text-hacker-green",children:[e.jsx("span",{className:"text-hacker-cyan",children:"→"}),e.jsx("span",{className:"truncate",children:n})]},i)),o.length>3&&e.jsxs("div",{className:"text-xs text-hacker-text-dim font-mono",children:["... and ",o.length-3," more link",o.length-3===1?"":"s"]})]})]})]}),t.similarity&&e.jsxs("div",{className:"mt-4 pt-3 border-t border-hacker-border text-xs font-mono text-hacker-text-darker",children:["Similarity: ",(t.similarity*100).toFixed(1),"%"]})]})]})}function y({results:t,isLoading:r}){return r?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-hacker-green font-mono text-sm animate-pulse",children:"Searching..."}),e.jsx("div",{className:"text-hacker-text-dim font-mono text-xs mt-2",children:"Please wait while we find the most relevant resources."})]}):t.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-hacker-red font-mono text-sm mb-2",children:"No results found"}),e.jsx("div",{className:"text-hacker-text-dim font-mono text-xs",children:"Try a different search query."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-hacker-green font-mono text-sm mb-4 border-b border-hacker-border pb-2",children:["Found ",t.length," results"]}),t.map(a=>e.jsx(u,{result:a},a.id))]})}export{v as S,y as a};
