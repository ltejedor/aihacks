import{c as m,a as u,r as c,R as h,j as e}from"./main-DJPDiisk.js";import{u as g}from"./useMutation-D21S_reQ.js";const p=u("src_utils_search_ts--searchResources_createServerFn_handler","/_serverFn"),f=m({method:"POST"}).handler(p);function b({onResults:n,onSearchStart:r}){const[s,l]=c.useState(""),t=g({fn:f,onSuccess:({data:a})=>{console.log("Search completed successfully:",a),n(a)}});c.useEffect(()=>{t.status==="pending"&&r&&r()},[t.status,r]);const i=a=>{a.preventDefault(),s.trim()&&(console.log("Starting search for:",s),t.mutate({data:s}))};return h.useEffect(()=>{t.error&&console.error("Search failed:",t.error)},[t.error]),e.jsxs("div",{className:"mb-8",children:[e.jsxs("form",{onSubmit:i,className:"flex gap-2",children:[e.jsx("input",{type:"text",value:s,onChange:a=>l(a.target.value),placeholder:"Search AI resources...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:t.status==="pending"}),e.jsx("button",{type:"submit",disabled:t.status==="pending"||!s.trim(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:t.status==="pending"?"Searching...":"Search"})]}),t.error&&e.jsxs("div",{className:"mt-2 text-red-600",children:["Error: ",t.error.message]})]})}function j({results:n,isLoading:r}){return r?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-600",children:"Searching..."})}):n.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-600",children:"No results found. Try a different search query."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:["Found ",n.length," results"]}),n.map(s=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.metadata.title}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsxs("span",{children:["👍 ",s.metadata.reaction_count]}),e.jsxs("span",{children:["⭐ ",s.metadata.evergreen_rating]})]})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("p",{className:"text-gray-700 overflow-hidden",style:{display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:[s.content.substring(0,300),"..."]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:s.metadata.tags.map((l,t)=>e.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:l},t))}),e.jsx("div",{className:"text-sm text-gray-500",children:new Date(s.metadata.date).toLocaleDateString()})]}),s.similarity&&e.jsxs("div",{className:"mt-2 text-xs text-gray-400",children:["Similarity: ",(s.similarity*100).toFixed(1),"%"]})]},s.id))]})}const N=function(){const[r,s]=c.useState([]),[l,t]=c.useState(!1),[i,a]=c.useState(!1),d=c.useCallback(o=>{console.log("Received search results:",o),s(o),t(!1),a(!0)},[]),x=c.useCallback(()=>{t(!0),a(!1)},[]);return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"AI Hacks Resources"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Search through our curated collection of AI resources, tools, and documentation."}),e.jsx(b,{onResults:d,onSearchStart:x}),(i||l)&&e.jsx(j,{results:r,isLoading:l})]})})};export{N as component};
